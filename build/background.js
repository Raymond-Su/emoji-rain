(()=>{try{chrome.runtime.onInstalled.addListener((()=>{console.log("Background page loaded")})),chrome.runtime.onMessage.addListener((function(e,o,r){console.log(e),"TOGGLE_RAIN"===e.type&&chrome.tabs.query({active:!0,currentWindow:!0},(function(o){chrome.storage.local.get([`toggle-rain-${o[0].id}`],(r=>{const a=!r[`toggle-rain-${o[0].id}`];chrome.storage.local.set({[`toggle-rain-${o[0].id}`]:a}),a?chrome.tabs.sendMessage(o[0].id,{type:"TOGGLE_RAIN",payload:e.payload}):chrome.tabs.sendMessage(o[0].id,{type:"TOGGLE_RAIN_OFF",payload:e.payload})}))}))}))}catch(e){console.error(e),chrome.storage.local.clear((function(){var e=chrome.runtime.lastError;e&&console.error(e)}))}})();